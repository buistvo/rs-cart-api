files:
  /etc/nginx/conf.d/https.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      # HTTPS server

      server {
          listen       443;
          server_name  localhost;
          
          ssl                  on;
          ssl_certificate      /etc/pki/tls/certs/server.crt;
          ssl_certificate_key  /etc/pki/tls/certs/server.key;
          
          ssl_session_timeout  5m;
          
          ssl_protocols  TLSv1 TLSv1.1 TLSv1.2;
          ssl_prefer_server_ciphers   on;

          # For enhanced health reporting support, uncomment this block:

          if ($time_iso8601 ~ "^(\d{4})-(\d{2})-(\d{2})T(\d{2})") {
              set $year $1;
              set $month $2;
              set $day $3;
              set $hour $4;
          }
          access_log /var/log/nginx/healthd/application.log.$year-$month-$day-$hour healthd;
          access_log  /var/log/nginx/access.log  main;
          
          location / {
              proxy_pass  http://nodejs;
              proxy_set_header   Connection "";
              proxy_http_version 1.1;
              proxy_set_header        Host            $host;
              proxy_set_header        X-Real-IP       $remote_addr;
              proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header        X-Forwarded-Proto https;
          }
      }
      
  /etc/pki/tls/certs/server.crt:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN CERTIFICATE-----
MIIFIzCCAwugAwIBAgIUEJfPjwhvnoPpzz2LZpUgQHYEdlUwDQYJKoZIhvcNAQEL
BQAwITEfMB0GA1UEAwwWKi5lbGFzdGljYmVhbnN0YWxrLmNvbTAeFw0yMzExMjQx
NDAyMzlaFw0yNDExMjMxNDAyMzlaMCExHzAdBgNVBAMMFiouZWxhc3RpY2JlYW5z
dGFsay5jb20wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDbVpg5y+Bd
S+hLMLaC9WKuCj1zPlmmFRLzolhY0/XpURv/ORu3DstiG22kanBsZyrtIHw/wT5D
Y85gvOykMTmN3eckmMliyU8mIqUyqmubZCdfYNC17Y+TTLWS/u/lSqZhpHWgMydC
LEmv6ZY/RGFB5sWP4U6qeDdaR4zEvWJnLClmGo3rRnSQdM7/F6o3wyEkcM6Exico
tXxLCQZHR8oJ94v0eZ+rZuVCUfK0fmXNuH1C+CdZMElzfvcMuNJODrNsMUPJrvD1
cVeXROnhQukstW+XSmV5stRTi3YOrNhRxbAwq92uJQKtrpGD/Tvuku4MQZetKhME
NUoSh2Rgd17QrJJwZ4z6spdtQ3wisjhGsqueHSVihkxFkVMglwFT6qhiAoRq/M5h
eXt3n3PXH9xntm6UyzbGT61cNJavd5cphC2nWqVAXapbmSzTVSq79axDXHx6MWd5
oagpdrneFgpazD3TfqYE9r9PPzKnbgwpyzR5rqgKbfXnkYwXQhr8Kg3J/W2L6llt
0MR0157xOsc7Udi728LhZNkxKXOkXHGcgxnh7FD2wOp8vy8c6EDJiWuRVuFurF21
pQIe45hxvvG2x3VQ5svQWOHMCfwHMpykUNBhgzCnvxCTXCYWIqZXdQw0kqx/CYs9
e2Gcuq8eLFOAewbuHS0DD9MisAwErkvCdwIDAQABo1MwUTAdBgNVHQ4EFgQU3WQV
0utTr8RewI20k2oV2rZjnScwHwYDVR0jBBgwFoAU3WQV0utTr8RewI20k2oV2rZj
nScwDwYDVR0TAQH/BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAK9gl9jkeXJeO
LguMJv+StgxzKhO2WoifurUhUjJo1j7i91Kz70D+tvycCsgmu0G8mT2A3kFwOvAh
7q2kT5Rxa4daamTYagO8gsNXfwJex1opEeapB1OhMKk3PvycWi3MpyS6JBQLyccX
5lCYJbQ184q3X/pRfptnvY0erVMUDxgiVNI83T8lIbTNQXBGAaZxeqpROGwWfUyP
0I5SI2U4JcDcNcyo0EiIG7yAZ8FkfjustvDnlLlSIBsz+i7jo6qipjo7Jvzz1Jsi
3DkwA1m1WpxM98cFf/88U2ZYywpmD43gJ2g0SMcgQCZutCTMg0XfWCyEJ5ihgnKw
6OgBaY6VatpvOve5YrMO2h0g/2BN45D59TBLznoT0CPTYlU3ClMSFqjTxU2HasBX
K4BSyFcMvLvUnQUE/42jG0shf9eTI4sgXFOe6sPNtfRtqX1ayoq5uaogyLBlkN1D
wVL9H94EgsLU9Qr/CyHOBfvdnImPAwQvGsWbljZx9Bytb5JvQuEZilbtyfjvzMT2
URhfGybw7ypsUt5OXotzNjs7jPxbvFwaoW2aePiGhufxoatfcG+I1sNp5gbT8cHr
tpo1J3z7DW1NmeKG3InC5Upn9eCRPDzoxC1A0583HJP2jDtWu1VShrxPzZiFWkfB
ty0CbE9XBbHMEg1G2fVZ1giMH2aJ1nA=
      -----END CERTIFICATE-----
      
  /etc/pki/tls/certs/server.key:
    mode: "000400"
    owner: root
    group: root
    content: |
      -----BEGIN RSA PRIVATE KEY-----
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
V8/kUGHws8LHKefFsII6GTxgTtU5u1I=
      -----END RSA PRIVATE KEY-----